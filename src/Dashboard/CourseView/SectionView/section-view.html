<template>
	<require from="./LessonView/lesson-view"></require>

	<modal view-model.ref="ratingModal">
		<div slot="header">
			Rate the video
		</div>
		<div slot="body">
			<radio-button options.bind="videoRatingOptions" value.bind="ratingSelected"
				label="You've finished a video. Rate your understanding of the concepts in the video.">
			</radio-button>

			<div class="btn-row">
				<button class="btn btn-primary" click.delegate="submitRating()"
					disabled.bind="ratingSelected == null">
					Finish
				</button>
			</div>
		</div>
	</modal>

	<div class="section-wrapper">
		<accordion open.bind="section.open" disabled.bind="!section.available">
			<div slot="header" class="section-heading-wrapper">
				<div class="section-heading">
					WEEK ${section.order}: ${section.name}
				</div>
				<div>
					${section.watchedVideos}/${section.totalVideos} videos | ${section.totalRunTime} min | ${section.dateString}
				</div>
			</div>
			<div slot="body">
				<lesson-view repeat.for="lesson of section.lessons" click.delegate="selectLesson(lesson)"
					active.bind="SelectedId == lesson.id" available.bind="lesson.available">
					<check-mark checked.bind="lesson.watched" on-change.call="completeLesson(lesson)"
						disabled.bind="lesson.watched">
					</check-mark>
					
					<div class="section-name">
						<div class="body-large">
							${lesson.order}. ${lesson.name}
						</div>
						<div class="section-runtime">
							<span class="fas fa-play-circle"></span>
							<span>${lesson.runTime} min</span>
						</div>
					</div>
					
					<div class="lessons-btn">
						<button class="btn btn-default" click.delegate="downloadLesson(lesson, $event)">
							<span class="far fa-folder"></span>
							Resources
						</button>
					</div>
				</lesson-view>
			</div>
		</accordion>
	</div>
</template>